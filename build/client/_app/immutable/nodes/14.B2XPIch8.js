import{_ as J}from"../chunks/11.BObqaQEo.js";import{s as at,e as m,a as V,t as L,c as _,b as k,m as lt,g as K,d as U,f as d,H as it,o as a,i as M,h as c,p as x,n as tt,v as nt,k as ct,w as ut,B as et,j as ot,z as rt,I as dt,J as ft}from"../chunks/scheduler.VK6vfmC_.js";import{S as pt,i as ht}from"../chunks/index.BycGP4sO.js";import{g as G}from"../chunks/entry.BtI8Upk3.js";import{p as mt}from"../chunks/stores.Dawflz9q.js";const _t=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,{document:st}=_t;function yt(n){let t,r,e,l,p;return{c(){t=m("button"),r=L("Edit"),this.h()},l(i){t=_(i,"BUTTON",{class:!0,title:!0});var u=k(t);r=U(u,"Edit"),u.forEach(d),this.h()},h(){a(t,"class","bg-pink-500 text-black text-lg px-4 py-1"),a(t,"title",e=n[7]+"+E")},m(i,u){M(i,t,u),c(t,r),l||(p=x(t,"click",n[14]),l=!0)},p(i,u){u&128&&e!==(e=i[7]+"+E")&&a(t,"title",e)},d(i){i&&d(t),l=!1,p()}}}function gt(n){let t,r,e,l;return{c(){t=m("div"),r=m("pre"),e=m("code"),l=L(n[2]),this.h()},l(p){t=_(p,"DIV",{class:!0});var i=k(t);r=_(i,"PRE",{class:!0});var u=k(r);e=_(u,"CODE",{class:!0});var f=k(e);l=U(f,n[2]),f.forEach(d),u.forEach(d),i.forEach(d),this.h()},h(){a(e,"class","language-"+n[9]),a(r,"class","svelte-5q1u89"),a(t,"class","grow whitespace-pre bg-dark p-4 overflow-x-scroll")},m(p,i){M(p,t,i),c(t,r),c(r,e),c(e,l),n[21](e)},p(p,i){i&4&&ot(l,p[2])},d(p){p&&d(t),n[21](null)}}}function bt(n){let t,r,e,l,p="Decrypt",i,u;return{c(){t=m("div"),r=m("input"),e=V(),l=m("button"),l.textContent=p,this.h()},l(f){t=_(f,"DIV",{class:!0});var h=k(t);r=_(h,"INPUT",{class:!0,type:!0,placeholder:!0}),e=K(h),l=_(h,"BUTTON",{class:!0,"data-svelte-h":!0}),lt(l)!=="svelte-one9lr"&&(l.textContent=p),h.forEach(d),this.h()},h(){a(r,"class","md:w-1/3 text-lg px-4 py-1 bg-dark text-white"),a(r,"type","text"),a(r,"placeholder","Enter password..."),a(l,"class","md:w-fit bg-amber-500 text-black text-lg px-4 py-1"),a(t,"class","flex flex-col items-center gap-4 md:mt-10")},m(f,h){M(f,t,h),c(t,r),n[19](r),rt(r,n[4]),c(t,e),c(t,l),i||(u=[x(r,"input",n[20]),x(l,"click",n[12])],i=!0)},p(f,h){h&16&&r.value!==f[4]&&rt(r,f[4])},d(f){f&&d(t),n[19](null),i=!1,nt(u)}}}function vt(n){let t,r;return{c(){t=m("div"),r=L(n[6]),this.h()},l(e){t=_(e,"DIV",{class:!0});var l=k(t);r=U(l,n[6]),l.forEach(d),this.h()},h(){a(t,"class","md:mt-10 text-center text-lg")},m(e,l){M(e,t,l),c(t,r)},p(e,l){l&64&&ot(r,e[6])},d(e){e&&d(t)}}}function wt(n){let t,r;return{c(){t=m("div"),r=new dt(!1),this.h()},l(e){t=_(e,"DIV",{class:!0});var l=k(t);r=ft(l,!1),l.forEach(d),this.h()},h(){r.a=null,a(t,"class","grow whitespace-pre bg-dark p-4 overflow-x-scroll")},m(e,l){M(e,t,l),r.m(n[3],t)},p(e,l){l&8&&r.p(e[3])},d(e){e&&d(t)}}}function kt(n){let t,r,e,l,p='<a href="/">Paste</a>',i,u,f,h,D,b,P,I,N,g,R,j,B,E,S,A,W,H,C,F,q,o=n[8]&&yt(n);function v(s,y){return s[10]?s[6]?vt:s[11]&&!s[0]?bt:gt:wt}let O=v(n),w=O(n);return{c(){t=m("div"),r=m("div"),e=m("div"),l=m("h1"),l.innerHTML=p,i=V(),u=m("button"),f=L("Info"),D=V(),b=m("button"),P=L("New"),N=V(),g=m("button"),R=L("Raw"),j=V(),o&&o.c(),B=V(),E=m("button"),S=L("Copy"),W=V(),w.c(),H=V(),C=m("link"),this.h()},l(s){t=_(s,"DIV",{class:!0});var y=k(t);r=_(y,"DIV",{class:!0});var X=k(r);e=_(X,"DIV",{class:!0});var T=k(e);l=_(T,"H1",{class:!0,"data-svelte-h":!0}),lt(l)!=="svelte-12fojij"&&(l.innerHTML=p),i=K(T),u=_(T,"BUTTON",{class:!0,title:!0});var z=k(u);f=U(z,"Info"),z.forEach(d),D=K(T),b=_(T,"BUTTON",{class:!0,title:!0});var Q=k(b);P=U(Q,"New"),Q.forEach(d),N=K(T),g=_(T,"BUTTON",{class:!0,title:!0});var Y=k(g);R=U(Y,"Raw"),Y.forEach(d),j=K(T),o&&o.l(T),B=K(T),E=_(T,"BUTTON",{class:!0,title:!0});var Z=k(E);S=U(Z,"Copy"),Z.forEach(d),T.forEach(d),X.forEach(d),W=K(y),w.l(y),y.forEach(d),H=K(s);const $=it("svelte-1oly7fe",st.head);C=_($,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0,referrerpolicy:!0}),$.forEach(d),this.h()},h(){a(l,"class","mr-auto text-2xl"),a(u,"class","underline underline-offset-4 px-2 py-1"),a(u,"title",h=n[7]+"+I"),a(b,"class","underline underline-offset-4 px-2 py-1"),a(b,"title",I=n[7]+"+N"),a(g,"class","underline underline-offset-4 px-2 py-1"),a(g,"title",n[10]?"Warning: If you get the raw, it will decrypt on the server":""),a(E,"class","bg-amber-500 text-black text-lg px-4 py-1"),a(E,"title",A=n[7]+"+C"),a(e,"class","flex flex-row items-center gap-4"),a(r,"class","pb-4"),a(t,"class","p-2 min-h-screen w-screen flex flex-col text-primary"),a(C,"rel","stylesheet"),a(C,"href","https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"),a(C,"integrity","sha512-vswe+cgvic/XBoF1OcM/TeJ2FW0OofqAVdCZiEYkd6dwGXthvkSFWOoGGJgS2CW70VK5dQM5Oh+7ne47s74VTg=="),a(C,"crossorigin","anonymous"),a(C,"referrerpolicy","no-referrer")},m(s,y){M(s,t,y),c(t,r),c(r,e),c(e,l),c(e,i),c(e,u),c(u,f),c(e,D),c(e,b),c(b,P),c(e,N),c(e,g),c(g,R),c(e,j),o&&o.m(e,null),c(e,B),c(e,E),c(E,S),c(t,W),w.m(t,null),M(s,H,y),c(st.head,C),F||(q=[x(u,"click",n[17]),x(b,"click",n[18]),x(g,"click",n[15]),x(E,"click",n[13])],F=!0)},p(s,[y]){y&128&&h!==(h=s[7]+"+I")&&a(u,"title",h),y&128&&I!==(I=s[7]+"+N")&&a(b,"title",I),s[8]&&o.p(s,y),y&128&&A!==(A=s[7]+"+C")&&a(E,"title",A),O===(O=v(s))&&w?w.p(s,y):(w.d(1),w=O(s),w&&(w.c(),w.m(t,null)))},i:tt,o:tt,d(s){s&&(d(t),d(H)),o&&o.d(),w.d(),d(C),F=!1,nt(q)}}}function Et(n,t,r){let e;ct(n,mt,o=>r(22,e=o));let{data:l}=t,{isOwner:p,content:i,contentHtml:u,language:f,encrypted:h,passwordProtected:D,initVector:b}=l,P="",I=!1,N,g,R,j="Ctrl";ut(()=>{var v,O,w;const o=((O=(v=navigator.userAgentData)==null?void 0:v.platform)==null?void 0:O.toLowerCase())==="macos"||((w=navigator.platform)==null?void 0:w.toLowerCase().startsWith("mac"));r(7,j=o?"âŒ˜":"Ctrl"),g==null||g.focus(),document.addEventListener("keydown",s=>{s.key==="n"&&(s.ctrlKey||s.metaKey)&&(s.preventDefault(),G("/")),s.key==="i"&&(s.ctrlKey||s.metaKey)&&(s.preventDefault(),G("/info")),s.key==="e"&&(s.ctrlKey||s.metaKey)&&p&&(s.preventDefault(),S()),s.key==="c"&&s.altKey&&s.shiftKey&&(s.preventDefault(),E()),h&&D&&!I&&s.key==="Enter"&&(s.preventDefault(),B())}),h&&!D&&(r(3,u="Decrypting..."),(async()=>{try{const s=e.url.hash.slice(1);if(!b||!s)throw new Error("Missing key");const{decrypt:y}=await J(()=>import("../chunks/crypto.VCyhLLHW.js"),[],import.meta.url);r(2,i=await y(i,b,decodeURIComponent(s)))}catch{r(6,R="Failed to decrypt")}finally{r(0,I=!0)}})())});async function B(){try{if(!b)throw new Error("Missing key");const{decryptWithPassword:o}=await J(()=>import("../chunks/crypto.VCyhLLHW.js"),[],import.meta.url);r(2,i=await o(i,b,P))}catch{r(6,R="Failed to decrypt")}finally{r(0,I=!0)}}function E(){navigator.clipboard.writeText(i)}function S(){const o=e.params.key,v=e.url.hash.slice(1);G(`/${o}/edit#${v}`)}function A(){const o=new URL(e.url.toString());o.searchParams.set("r","");const v="WARNING: Getting the raw will decrypt the content on the server. It's not recommended to get the raw if the content is encrypted. Continue?";if(h&&!D){if(!confirm(v))return;o.searchParams.set("k",decodeURIComponent(o.hash.slice(1))),o.hash=""}D&&o.searchParams.set("p",P),window.open(o.toString(),"_self")}const W=()=>G("/info"),H=()=>G("/");function C(o){et[o?"unshift":"push"](()=>{g=o,r(5,g)})}function F(){P=this.value,r(4,P)}function q(o){et[o?"unshift":"push"](()=>{N=o,r(1,N)})}return n.$$set=o=>{"data"in o&&r(16,l=o.data)},n.$$.update=()=>{n.$$.dirty&3&&I&&N&&f&&f!=="plaintext"&&(async()=>{const o=(await J(()=>import("../chunks/prism.BhcPIYfR.js").then(O=>O.p),[],import.meta.url)).default,v=document.createElement("script");v.async=!0,v.src=`https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-${f}.min.js`,v.onload=()=>o.highlightAll(),document.body.appendChild(v)})()},[I,N,i,u,P,g,R,j,p,f,h,D,B,E,S,A,l,W,H,C,F,q]}class Ot extends pt{constructor(t){super(),ht(this,t,Et,kt,at,{data:16})}}export{Ot as component};
